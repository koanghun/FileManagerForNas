# 개발일지: 2025-11-13

## 완료된 작업

### 1. AI 모델 불일치 문제 해결

`backend/search_service.py`에서 쿼리 임베딩 및 문서 인덱싱 모델을 `paraphrase-multilingual-MiniLM-L12-v2`로 통일하여 검색 결과의 일관성을 확보했습니다.

### 2. 기본적인 파일 관리 기능 구현 (백엔드)

파일 업로드, 다운로드, 삭제 기능을 백엔드에 구현하여 파일 시스템 Provider를 통해 Synology NAS 및 로컬 파일 시스템을 관리할 수 있도록 했습니다.

-   **`backend/providers/base.py` 업데이트:** `upload_file`, `download_file`, `delete_item` 추상 메서드 추가.
-   **`backend/providers/local.py` 업데이트:** `upload_file`, `download_file`, `delete_item` 메서드 구현.
-   **`backend/providers/synology.py` 업데이트:** `upload_file`, `download_file`, `delete_item` 메서드 구현 (Synology File Station API 연동).
-   **`backend/main.py` 업데이트:**
    -   `DeleteItemRequest` Pydantic 모델 추가.
    -   `POST /api/upload` 엔드포인트 추가 (파일 업로드).
    -   `GET /api/download` 엔드포인트 추가 (파일 다운로드).
    -   `DELETE /api/file` 엔드포인트 추가 (파일/폴더 삭제).
-   **`requirements.txt` 업데이트:** `aiofiles` 라이브러리 추가.
-   **재귀적 문자 텍스트 분할기 구현:**
    -   `requirements.txt`에 `langchain-text-splitters` 추가.
    -   `backend/main.py`의 `chunk_text` 함수를 `RecursiveCharacterTextSplitter`를 사용하도록 업데이트.
-   **인덱싱 상태 동기화 문제 해결:**
    -   서버 재시작 시 `indexing` 상태가 유지되는 문제를 해결하기 위해 `IndexManager` 시작 시 `indexing` 상태를 `failed`로 자동 변경하는 로직 추가.
-   **Synology 파일 인코딩 및 깨짐 문제 해결:**
    -   `chardet`를 사용하여 파일 인코딩을 자동 감지하고, 감지 실패 시 `utf-8`, `euc-kr`, `shift_jis`를 `errors='replace'` 옵션으로 시도하여 검색 결과의 텍스트 깨짐 문제를 해결.
-   **자연어 검색 정확도 개선 (청킹 파라미터 조정):**
    -   `backend/main.py`의 `chunk_text` 함수에서 `chunk_size`를 `750`으로, `chunk_overlap`을 `75`로 조정하여 더 많은 컨텍스트를 캡처하도록 개선.
-   **자연어 검색 정확도 개선 (재순위 지정 도입):**
    -   `sentence-transformers`의 `CrossEncoder` 모델(`Dongjin-kr/ko-reranker`)을 사용하여 초기 검색 결과를 재순위 지정하여 검색 정확도를 향상.

## 다음 계획
-   프론트엔드 UI/UX 추가 개선 (예: 인덱싱 진행률 표시, 에러 메시지 상세화).
-   영상 콘텐츠 메타데이터 자동 보강 기능 구현.
